<button onclick="createPayment()">发起一笔测试支付 (0.01 Pi)</button>

<script src="https://sdk.minepi.com/pi-sdk.js"></script>
<script>
  async function createPayment() {
    try {
      // 初始化 SDK（如果还没）
      await Pi.init({ version: "2.0" });

      // 登录授权（如果需要）
      const auth = await Pi.authenticate(['username', 'payments'], () => {});

      // 创建支付
      const payment = await Pi.createPayment({
        amount: 0.01,
        memo: "测试支付 - 练手 App",
        metadata: { test: "sandbox" }
      }, {
        onReadyForServerApproval: (paymentId) => {
          console.log('等待批准', paymentId);
          // 测试网可手动完成或跳过
        },
        onReadyForServerCompletion: (paymentId, txid) => {
          alert('支付成功！交易ID: ' + txid);
        },
        onCancel: () => alert('支付取消'),
        onError: (error) => alert('支付失败: ' + error.message)
      });

      console.log('支付创建成功', payment);
    } catch (err) {
      alert('支付初始化失败: ' + err.message);
    }
  }
</script>