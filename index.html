async function createPayment() {
  try {
    alert('开始初始化 Pi SDK');  // 测试执行到这里
    await Pi.init({ version: "2.0", sandbox: true });
    alert('Pi SDK 初始化成功');

    alert('开始认证');
    const scopes = ['username', 'payments', 'wallet_address', 'user_info'];
    const auth = await Pi.authenticate(scopes, onIncompletePaymentFound);
    alert('认证成功！用户名: ' + auth.user.username);

    // 支付部分保持不变
    const paymentData = {
      amount: 0.01,
      memo: "测试支付 - 练手 App",
      metadata: { test: "sandbox" }
    };

    const payment = await Pi.createPayment(paymentData, {
      // ... (你的 onReadyForServerApproval 等回调)
    });

    alert('支付创建成功');
  } catch (err) {
    alert('支付失败: ' + err.message + '\n错误详情: ' + JSON.stringify(err));
    console.error('支付流程完整错误', err);
  }
}